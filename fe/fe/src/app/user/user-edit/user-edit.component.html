<div class="width-100 height-100" id="c_userCnt">
  <div class="header" [ngClass]="{'header-on-error': (isLoading$ | async) || failedGateway}">
    <app-breadcrumbs [items]="[{label:'список пользователей', route:'../../list'}, {label: getTitle(userId), route:'../../details/' + userId}]" [id]="'userEdit'"></app-breadcrumbs>
    <h1 class="title-large" id="h_addUser">{{"user.editUser.title" | translate }}</h1>
  </div>
  <app-user-form
    [user]="user"
    [roles]="userRoles"
    [formObject]="editUserForm"
    [isLoading]="isLoading$"
    [isFailed]="failedGateway"
    [formMode]="formMode"
    (submitForm)='update($event)'
    (submitFailed)='updateFailed($event)'
    (setIsDirty)='setIsDirty($event)'
    *ngIf="user && editUserForm"
  >
    <div form-content-email id="c_userEmail" class="flex flex-col flex-col-4 m-b-32">
      <mat-label class="label">{{'user.placeholders.email' | translate}}</mat-label>
      <span>{{user.email}}</span>
    </div>

    <div form-content-actions class="footer">
      <button
        mat-button
        type="button"
        class="button button-text"
        id="b_cancelBtn"
        (click)="cancelUserEdit()"
      >
        {{"general.cancelBtn" | translate}}
      </button>
      <button
        mat-button
        type="submit"
        class="button button-primary"
        id="b_saveBtn"
        [disabled]="isLoading$ | async"
      >
        {{"general.saveBtn" | translate}}
      </button>
    </div>
  </app-user-form>

  <div class="loading-spinner-cnt" *ngIf="(isLoading$ | async) || failedGateway">
    <div class="loading-spinner" id="d_loadingSpinnerCnt">
      <mat-spinner *ngIf="(isLoading$ | async)" id="s_spinnerCmp"></mat-spinner>
      <div id="cnt_errorCnt" class="gateway-api-errors" *ngIf="!(isLoading$ | async) && failedGateway">
        {{"dataSource.gatewayUnavailable" | translate}}
      </div>
    </div>
  </div>
</div>



